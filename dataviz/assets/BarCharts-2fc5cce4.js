import{d as ot,u as gt,o as ft,q as ht,c as J,i as y,a as M,b as q,f as mt,m as wt,g as C,e as I,h as Z,r as xt,l as yt,R as _t,s as bt,t as kt,F as vt}from"./index-dcfed4a5.js";import{m as Y}from"./utils-c45847a5.js";import{i as st,l as z,s as _}from"./linear-d9fdebac.js";import{m as tt}from"./max-adfc8a60.js";class et extends Map{constructor(a,r=$t){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),a!=null)for(const[n,o]of a)this.set(n,o)}get(a){return super.get(nt(this,a))}has(a){return super.has(nt(this,a))}set(a,r){return super.set(Mt(this,a),r)}delete(a){return super.delete(Ot(this,a))}}function nt({_intern:e,_key:a},r){const n=a(r);return e.has(n)?e.get(n):r}function Mt({_intern:e,_key:a},r){const n=a(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Ot({_intern:e,_key:a},r){const n=a(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function $t(e){return e!==null&&typeof e=="object"?e.valueOf():e}function St(e,a,r){e=+e,a=+a,r=(o=arguments.length)<2?(a=e,e=0,1):o<3?1:+r;for(var n=-1,o=Math.max(0,Math.ceil((a-e)/r))|0,s=new Array(o);++n<o;)s[n]=e+n*r;return s}const at=Symbol("implicit");function it(){var e=new et,a=[],r=[],n=at;function o(s){let l=e.get(s);if(l===void 0){if(n!==at)return n;e.set(s,l=a.push(s)-1)}return r[l%r.length]}return o.domain=function(s){if(!arguments.length)return a.slice();a=[],e=new et;for(const l of s)e.has(l)||e.set(l,a.push(l)-1);return o},o.range=function(s){return arguments.length?(r=Array.from(s),o):r.slice()},o.unknown=function(s){return arguments.length?(n=s,o):n},o.copy=function(){return it(a,r).unknown(n)},st.apply(o,arguments),o}function ct(){var e=it().unknown(void 0),a=e.domain,r=e.range,n=0,o=1,s,l,m=!1,p=0,x=0,f=.5;delete e.unknown;function u(){var i=a().length,h=o<n,c=h?o:n,d=h?n:o;s=(d-c)/Math.max(1,i-p+x*2),m&&(s=Math.floor(s)),c+=(d-c-s*(i-p))*f,l=s*(1-p),m&&(c=Math.round(c),l=Math.round(l));var O=St(i).map(function(P){return c+s*P});return r(h?O.reverse():O)}return e.domain=function(i){return arguments.length?(a(i),u()):a()},e.range=function(i){return arguments.length?([n,o]=i,n=+n,o=+o,u()):[n,o]},e.rangeRound=function(i){return[n,o]=i,n=+n,o=+o,m=!0,u()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(i){return arguments.length?(m=!!i,u()):m},e.padding=function(i){return arguments.length?(p=Math.min(1,x=+i),u()):p},e.paddingInner=function(i){return arguments.length?(p=Math.min(1,i),u()):p},e.paddingOuter=function(i){return arguments.length?(x=+i,u()):x},e.align=function(i){return arguments.length?(f=Math.max(0,Math.min(1,i)),u()):f},e.copy=function(){return ct(a(),[n,o]).round(m).paddingInner(p).paddingOuter(x).align(f)},st.apply(u(),arguments)}const Wt={id:"gradient-right"},Lt=["stop-color"],At=["stop-color"],Bt={id:"gradient-left"},Gt=["stop-color"],It=["stop-color"],rt="bar-container",zt=ot({__name:"Bar",props:{category:{}},setup(e){const a=e;gt(l=>({"7ea61361":M(q),"252a1e3e":M(mt)}));let r,n;const o=async()=>{r||(r=(await Z.get("/api/words")).data,n=(await Z.get("/api/count")).data)},s=async(l,m)=>{await o();const p=r.filter(t=>Y(t.category,l)).sort((t,g)=>g.popular+g.wanted-t.popular-t.wanted),x=window.innerHeight,f=window.innerWidth,u=wt([40,.032*f+12]),i=.01*f+10,h={top:.025*x+32,left:.08*f+35,right:.08*f+35,bottom:0},c=f-h.left-h.right,d=c*.15+12,O=p.length*(u+i)-i,P=h.top+h.bottom+O,W=50,L=400,R=ct().domain(p.map(t=>t.word)).range([0,O]).padding(i/(u+i)),A=z().domain([0,tt(p.map(t=>t.popular))]).range([0,.5*c-d/2]),b=z().domain([0,tt(p.map(t=>t.wanted))]).range([0,.5*c-d/2]),K=_(`#${rt}`).select("svg").attr("width",f).attr("height",P);K.select("g").remove();const E=K.append("g").attr("transform",`translate(${h.left},${h.top})`),Q=d-z([500,2e3],[40,0])(f);E.append("text").attr("x",(c+Q)/2).text(Y("OpSys",l)?"Personal Use":"Have Worked With").attr("fill",q).attr("font-size",u*.8),E.append("text").attr("x",(c-Q)/2).text(Y("OpSys",l)?"Professional Use":"Want to Work With").attr("text-anchor","end").attr("fill",q).attr("font-size",u*.8);const T=E.selectAll("g").data(p).enter().append("g").attr("transform",t=>`translate(0,${R(t.word)||0})`),k=t=>`${(t/n*100).toFixed(2)}%`,lt=t=>{const g=($,U)=>{const S=_($.parentElement),[pt,j,X]=S.selectAll("text").attr("opacity",1);_(j).text(w=>`${w.wanted} / ${k(w.wanted)}`),_(X).text(w=>`${k(w.popular)} / ${w.popular}`)},G=($,U)=>{const S=_($.parentElement),[pt,j,X]=S.selectAll("text").attr("opacity",B);_(j).text(w=>k(w.wanted)),_(X).text(w=>k(w.popular))};t.forEach($=>$.on("mouseover",function(U,S){g(this)}).on("mouseleave",function(U,S){G(this)}))},F=T.append("rect").attr("x",.5*(c+d)).attr("width",t=>A(t.popular)).attr("height",R.bandwidth()).attr("fill","url(#gradient-right)").attr("rx",5),H=T.append("rect").attr("x",t=>.5*(c-d)-b(t.wanted)).attr("width",t=>b(t.wanted)).attr("height",R.bandwidth()).attr("fill","url(#gradient-left)").attr("rx",5),D=T.append("g").attr("transform",`translate(0, ${.65*u})`),v=10,B=.6,ut=t=>{const g=z([500,2e3],[.65,.42])(f),G=u*.6-t.word.length**.875*g;return G>0?G:1},dt=D.append("text").attr("x",.5*c).attr("class","bar-label").attr("font-size",t=>ut(t)).attr("text-anchor","middle").attr("opacity",B).text(t=>t.word),N=D.append("text").attr("x",t=>.5*(c-d)-b(t.wanted)-v).attr("class","bar-label").attr("font-size",u*.6).attr("text-anchor","end").attr("opacity",B).text(t=>k(t.wanted)),V=D.append("text").attr("x",t=>.5*(c+d)+A(t.popular)+v).attr("class","bar-label").attr("font-size",u*.6).attr("opacity",B).text(t=>k(t.popular));lt([N,dt,V,H,F]),m&&(N.attr("x",.5*(c-d)-v),N.transition().duration(L).delay((t,g)=>g*W).attr("x",t=>.5*(c-d)-b(t.wanted)-v),V.attr("x",.5*(c+d)+v),V.transition().duration(L).delay((t,g)=>g*W).attr("x",t=>.5*(c+d)+A(t.popular)+v),F.attr("width",0),F.transition().duration(L).delay((t,g)=>g*W).attr("width",t=>A(t.popular)),H.attr("width",0).attr("x",.5*(c-d)),H.transition().duration(L).delay((t,g)=>g*W).attr("x",t=>.5*(c-d)-b(t.wanted)).attr("width",t=>b(t.wanted)))};return ft(()=>{s(a.category,!0),window.addEventListener("resize",()=>{s(a.category,!1)})}),ht(()=>{s(a.category,!0)}),(l,m)=>(C(),J("div",{id:rt},[(C(),J("svg",null,[y("defs",null,[y("linearGradient",Wt,[y("stop",{offset:"0%","stop-color":M(I),"stop-opacity":"0.8"},null,8,Lt),y("stop",{offset:"85%","stop-color":M(I)},null,8,At)]),y("linearGradient",Bt,[y("stop",{offset:"15%","stop-color":M(I)},null,8,Gt),y("stop",{offset:"100%","stop-color":M(I),"stop-opacity":"0.8"},null,8,It)])])]))]))}});const Tt=ot({__name:"BarCharts",props:{category:{}},setup(e){e.category||xt.push("/bar/language");const r=["Language","Database","Platform","WebFrame","MiscTech","ToolsTech","NEWCollabTools","OpSys","OfficeStackAsync","OfficeStackSync","AISearch","AIDev"];return(n,o)=>(C(),J(vt,null,[yt(_t,{base:"/bar",paths:r.map(s=>s.toLowerCase()),texts:r},null,8,["paths"]),n.category?(C(),bt(zt,{key:0,category:n.category},null,8,["category"])):kt("",!0)],64))}});export{Tt as default};
