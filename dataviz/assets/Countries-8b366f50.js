import{d as Vt,u as kt,o as Jt,c as Kt,a as nt,b as zn,e as tt,f as Qt,g as Ut,h as jt,_ as bt}from"./index-c5f0b3eb.js";import{s as it,g as ni}from"./utils-ab4346b7.js";import{m as ti}from"./max-adfc8a60.js";import{s as ii}from"./linear-ad2ecf7f.js";class b{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const u=e[r],f=t+u,c=Math.abs(t)<Math.abs(u)?t-(f-u):u-(f-t);c&&(e[i++]=c),t=f}return e[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let e=this._n,i,r,u,f=0;if(e>0){for(f=t[--e];e>0&&(i=f,r=t[--e],f=i+r,u=r-(f-i),!u););e>0&&(u<0&&t[e-1]<0||u>0&&t[e-1]>0)&&(r=u*2,i=f+r,r==i-f&&(f=i))}return f}}function*ei(n){for(const t of n)yield*t}function At(n){return Array.from(ei(n))}var z=1e-6,ri=1e-12,A=Math.PI,Y=A/2,et=A/4,Z=A*2,Q=180/A,W=A/180,F=Math.abs,oi=Math.atan,gn=Math.atan2,H=Math.cos,B=Math.sin,ui=Math.sign||function(n){return n>0?1:n<0?-1:0},tn=Math.sqrt;function ai(n){return n>1?0:n<-1?A:Math.acos(n)}function dn(n){return n>1?Y:n<-1?-Y:Math.asin(n)}function q(){}function $n(n,t){n&&ot.hasOwnProperty(n.type)&&ot[n.type](n,t)}var rt={Feature:function(n,t){$n(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,r=e.length;++i<r;)$n(e[i].geometry,t)}},ot={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)n=e[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){Hn(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)Hn(e[i],t,0)},Polygon:function(n,t){ut(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)ut(e[i],t)},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,r=e.length;++i<r;)$n(e[i],t)}};function Hn(n,t,e){var i=-1,r=n.length-e,u;for(t.lineStart();++i<r;)u=n[i],t.point(u[0],u[1],u[2]);t.lineEnd()}function ut(n,t){var e=-1,i=n.length;for(t.polygonStart();++e<i;)Hn(n[e],t,1);t.polygonEnd()}function rn(n,t){n&&rt.hasOwnProperty(n.type)?rt[n.type](n,t):$n(n,t)}function Bn(n){return[gn(n[1],n[0]),dn(n[2])]}function un(n){var t=n[0],e=n[1],i=H(e);return[i*H(t),i*B(t),B(e)]}function En(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function Mn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function Tn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function yn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function On(n){var t=tn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function Wn(n,t){function e(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(e.invert=function(i,r){return i=t.invert(i,r),i&&n.invert(i[0],i[1])}),e}function Xn(n,t){return F(n)>A&&(n-=Math.round(n/Z)*Z),[n,t]}Xn.invert=Xn;function li(n,t,e){return(n%=Z)?t||e?Wn(lt(n),ft(t,e)):lt(n):t||e?ft(t,e):Xn}function at(n){return function(t,e){return t+=n,F(t)>A&&(t-=Math.round(t/Z)*Z),[t,e]}}function lt(n){var t=at(n);return t.invert=at(-n),t}function ft(n,t){var e=H(n),i=B(n),r=H(t),u=B(t);function f(c,d){var g=H(d),o=H(c)*g,a=B(c)*g,l=B(d),p=l*e+o*i;return[gn(a*r-p*u,o*e-l*i),dn(p*r+a*u)]}return f.invert=function(c,d){var g=H(d),o=H(c)*g,a=B(c)*g,l=B(d),p=l*r-a*u;return[gn(a*r+l*u,o*e+p*i),dn(p*e-o*i)]},f}function fi(n,t,e,i,r,u){if(e){var f=H(t),c=B(t),d=i*e;r==null?(r=t+i*Z,u=t-d/2):(r=ct(f,r),u=ct(f,u),(i>0?r<u:r>u)&&(r+=i*Z));for(var g,o=r;i>0?o>u:o<u;o-=d)g=Bn([f,-c*H(o),-c*B(o)]),n.point(g[0],g[1])}}function ct(n,t){t=un(t),t[0]-=n,On(t);var e=ai(-t[1]);return((-t[2]<0?-e:e)+Z-z)%Z}function It(){var n=[],t;return{point:function(e,i,r){t.push([e,i,r])},lineStart:function(){n.push(t=[])},lineEnd:q,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function mn(n,t){return F(n[0]-t[0])<z&&F(n[1]-t[1])<z}function _n(n,t,e,i){this.x=n,this.z=t,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function Ct(n,t,e,i,r){var u=[],f=[],c,d;if(n.forEach(function(h){if(!((_=h.length-1)<=0)){var _,v=h[0],R=h[_],E;if(mn(v,R)){if(!v[2]&&!R[2]){for(r.lineStart(),c=0;c<_;++c)r.point((v=h[c])[0],v[1]);r.lineEnd();return}R[0]+=2*z}u.push(E=new _n(v,h,null,!0)),f.push(E.o=new _n(v,null,E,!1)),u.push(E=new _n(R,h,null,!1)),f.push(E.o=new _n(R,null,E,!0))}}),!!u.length){for(f.sort(t),st(u),st(f),c=0,d=f.length;c<d;++c)f[c].e=e=!e;for(var g=u[0],o,a;;){for(var l=g,p=!0;l.v;)if((l=l.n)===g)return;o=l.z,r.lineStart();do{if(l.v=l.o.v=!0,l.e){if(p)for(c=0,d=o.length;c<d;++c)r.point((a=o[c])[0],a[1]);else i(l.x,l.n.x,1,r);l=l.n}else{if(p)for(o=l.p.z,c=o.length-1;c>=0;--c)r.point((a=o[c])[0],a[1]);else i(l.x,l.p.x,-1,r);l=l.p}l=l.o,o=l.z,p=!p}while(!l.v);r.lineEnd()}}}function st(n){if(t=n.length){for(var t,e=0,i=n[0],r;++e<t;)i.n=r=n[e],r.p=i,i=r;i.n=r=n[0],r.p=i}}function Fn(n){return F(n[0])<=A?n[0]:ui(n[0])*((F(n[0])+A)%Z-A)}function ci(n,t){var e=Fn(t),i=t[1],r=B(i),u=[B(e),-H(e),0],f=0,c=0,d=new b;r===1?i=Y+z:r===-1&&(i=-Y-z);for(var g=0,o=n.length;g<o;++g)if(l=(a=n[g]).length)for(var a,l,p=a[l-1],h=Fn(p),_=p[1]/2+et,v=B(_),R=H(_),E=0;E<l;++E,h=S,v=y,R=I,p=w){var w=a[E],S=Fn(w),$=w[1]/2+et,y=B($),I=H($),N=S-h,L=N>=0?1:-1,C=L*N,m=C>A,O=v*y;if(d.add(gn(O*L*B(C),R*I+O*H(C))),f+=m?N+L*Z:N,m^h>=e^S>=e){var T=Mn(un(p),un(w));On(T);var M=Mn(u,T);On(M);var s=(m^N>=0?-1:1)*dn(M[2]);(i>s||i===s&&(T[0]||T[1]))&&(c+=m^N>=0?1:-1)}}return(f<-z||f<z&&d<-ri)^c&1}function zt(n,t,e,i){return function(r){var u=t(r),f=It(),c=t(f),d=!1,g,o,a,l={point:p,lineStart:_,lineEnd:v,polygonStart:function(){l.point=R,l.lineStart=E,l.lineEnd=w,o=[],g=[]},polygonEnd:function(){l.point=p,l.lineStart=_,l.lineEnd=v,o=At(o);var S=ci(g,i);o.length?(d||(r.polygonStart(),d=!0),Ct(o,pi,S,e,r)):S&&(d||(r.polygonStart(),d=!0),r.lineStart(),e(null,null,1,r),r.lineEnd()),d&&(r.polygonEnd(),d=!1),o=g=null},sphere:function(){r.polygonStart(),r.lineStart(),e(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(S,$){n(S,$)&&r.point(S,$)}function h(S,$){u.point(S,$)}function _(){l.point=h,u.lineStart()}function v(){l.point=p,u.lineEnd()}function R(S,$){a.push([S,$]),c.point(S,$)}function E(){c.lineStart(),a=[]}function w(){R(a[0][0],a[0][1]),c.lineEnd();var S=c.clean(),$=f.result(),y,I=$.length,N,L,C;if(a.pop(),g.push(a),a=null,!!I){if(S&1){if(L=$[0],(N=L.length-1)>0){for(d||(r.polygonStart(),d=!0),r.lineStart(),y=0;y<N;++y)r.point((C=L[y])[0],C[1]);r.lineEnd()}return}I>1&&S&2&&$.push($.pop().concat($.shift())),o.push($.filter(si))}}return l}}function si(n){return n.length>1}function pi(n,t){return((n=n.x)[0]<0?n[1]-Y-z:Y-n[1])-((t=t.x)[0]<0?t[1]-Y-z:Y-t[1])}const pt=zt(function(){return!0},hi,di,[-A,-Y]);function hi(n){var t=NaN,e=NaN,i=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(u,f){var c=u>0?A:-A,d=F(u-t);F(d-A)<z?(n.point(t,e=(e+f)/2>0?Y:-Y),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(c,e),n.point(u,e),r=0):i!==c&&d>=A&&(F(t-i)<z&&(t-=i*z),F(u-c)<z&&(u-=c*z),e=gi(t,e,u,f),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(c,e),r=0),n.point(t=u,e=f),i=c},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-r}}}function gi(n,t,e,i){var r,u,f=B(n-e);return F(f)>z?oi((B(t)*(u=H(i))*B(e)-B(i)*(r=H(t))*B(n))/(r*u*f)):(t+i)/2}function di(n,t,e,i){var r;if(n==null)r=e*Y,i.point(-A,r),i.point(0,r),i.point(A,r),i.point(A,0),i.point(A,-r),i.point(0,-r),i.point(-A,-r),i.point(-A,0),i.point(-A,r);else if(F(n[0]-t[0])>z){var u=n[0]<t[0]?A:-A;r=e*u/2,i.point(-u,r),i.point(0,r),i.point(u,r)}else i.point(t[0],t[1])}function vi(n){var t=H(n),e=6*W,i=t>0,r=F(t)>z;function u(o,a,l,p){fi(p,n,e,l,o,a)}function f(o,a){return H(o)*H(a)>t}function c(o){var a,l,p,h,_;return{lineStart:function(){h=p=!1,_=1},point:function(v,R){var E=[v,R],w,S=f(v,R),$=i?S?0:g(v,R):S?g(v+(v<0?A:-A),R):0;if(!a&&(h=p=S)&&o.lineStart(),S!==p&&(w=d(a,E),(!w||mn(a,w)||mn(E,w))&&(E[2]=1)),S!==p)_=0,S?(o.lineStart(),w=d(E,a),o.point(w[0],w[1])):(w=d(a,E),o.point(w[0],w[1],2),o.lineEnd()),a=w;else if(r&&a&&i^S){var y;!($&l)&&(y=d(E,a,!0))&&(_=0,i?(o.lineStart(),o.point(y[0][0],y[0][1]),o.point(y[1][0],y[1][1]),o.lineEnd()):(o.point(y[1][0],y[1][1]),o.lineEnd(),o.lineStart(),o.point(y[0][0],y[0][1],3)))}S&&(!a||!mn(a,E))&&o.point(E[0],E[1]),a=E,p=S,l=$},lineEnd:function(){p&&o.lineEnd(),a=null},clean:function(){return _|(h&&p)<<1}}}function d(o,a,l){var p=un(o),h=un(a),_=[1,0,0],v=Mn(p,h),R=En(v,v),E=v[0],w=R-E*E;if(!w)return!l&&o;var S=t*R/w,$=-t*E/w,y=Mn(_,v),I=yn(_,S),N=yn(v,$);Tn(I,N);var L=y,C=En(I,L),m=En(L,L),O=C*C-m*(En(I,I)-1);if(!(O<0)){var T=tn(O),M=yn(L,(-C-T)/m);if(Tn(M,I),M=Bn(M),!l)return M;var s=o[0],P=a[0],G=o[1],D=a[1],X;P<s&&(X=s,s=P,P=X);var ln=P-s,J=F(ln-A)<z,j=J||ln<z;if(!J&&D<G&&(X=G,G=D,D=X),j?J?G+D>0^M[1]<(F(M[0]-s)<z?G:D):G<=M[1]&&M[1]<=D:ln>A^(s<=M[0]&&M[0]<=P)){var K=yn(L,(-C+T)/m);return Tn(K,I),[M,Bn(K)]}}}function g(o,a){var l=i?n:A-n,p=0;return o<-l?p|=1:o>l&&(p|=2),a<-l?p|=4:a>l&&(p|=8),p}return zt(f,c,u,i?[0,-n]:[-A,n-A])}function Si(n,t,e,i,r,u){var f=n[0],c=n[1],d=t[0],g=t[1],o=0,a=1,l=d-f,p=g-c,h;if(h=e-f,!(!l&&h>0)){if(h/=l,l<0){if(h<o)return;h<a&&(a=h)}else if(l>0){if(h>a)return;h>o&&(o=h)}if(h=r-f,!(!l&&h<0)){if(h/=l,l<0){if(h>a)return;h>o&&(o=h)}else if(l>0){if(h<o)return;h<a&&(a=h)}if(h=i-c,!(!p&&h>0)){if(h/=p,p<0){if(h<o)return;h<a&&(a=h)}else if(p>0){if(h>a)return;h>o&&(o=h)}if(h=u-c,!(!p&&h<0)){if(h/=p,p<0){if(h>a)return;h>o&&(o=h)}else if(p>0){if(h<o)return;h<a&&(a=h)}return o>0&&(n[0]=f+o*l,n[1]=c+o*p),a<1&&(t[0]=f+a*l,t[1]=c+a*p),!0}}}}}var fn=1e9,wn=-fn;function Ei(n,t,e,i){function r(g,o){return n<=g&&g<=e&&t<=o&&o<=i}function u(g,o,a,l){var p=0,h=0;if(g==null||(p=f(g,a))!==(h=f(o,a))||d(g,o)<0^a>0)do l.point(p===0||p===3?n:e,p>1?i:t);while((p=(p+a+4)%4)!==h);else l.point(o[0],o[1])}function f(g,o){return F(g[0]-n)<z?o>0?0:3:F(g[0]-e)<z?o>0?2:1:F(g[1]-t)<z?o>0?1:0:o>0?3:2}function c(g,o){return d(g.x,o.x)}function d(g,o){var a=f(g,1),l=f(o,1);return a!==l?a-l:a===0?o[1]-g[1]:a===1?g[0]-o[0]:a===2?g[1]-o[1]:o[0]-g[0]}return function(g){var o=g,a=It(),l,p,h,_,v,R,E,w,S,$,y,I={point:N,lineStart:O,lineEnd:T,polygonStart:C,polygonEnd:m};function N(s,P){r(s,P)&&o.point(s,P)}function L(){for(var s=0,P=0,G=p.length;P<G;++P)for(var D=p[P],X=1,ln=D.length,J=D[0],j,K,Sn=J[0],en=J[1];X<ln;++X)j=Sn,K=en,J=D[X],Sn=J[0],en=J[1],K<=i?en>i&&(Sn-j)*(i-K)>(en-K)*(n-j)&&++s:en<=i&&(Sn-j)*(i-K)<(en-K)*(n-j)&&--s;return s}function C(){o=a,l=[],p=[],y=!0}function m(){var s=L(),P=y&&s,G=(l=At(l)).length;(P||G)&&(g.polygonStart(),P&&(g.lineStart(),u(null,null,1,g),g.lineEnd()),G&&Ct(l,c,s,u,g),g.polygonEnd()),o=g,l=p=h=null}function O(){I.point=M,p&&p.push(h=[]),$=!0,S=!1,E=w=NaN}function T(){l&&(M(_,v),R&&S&&a.rejoin(),l.push(a.result())),I.point=N,S&&o.lineEnd()}function M(s,P){var G=r(s,P);if(p&&h.push([s,P]),$)_=s,v=P,R=G,$=!1,G&&(o.lineStart(),o.point(s,P));else if(G&&S)o.point(s,P);else{var D=[E=Math.max(wn,Math.min(fn,E)),w=Math.max(wn,Math.min(fn,w))],X=[s=Math.max(wn,Math.min(fn,s)),P=Math.max(wn,Math.min(fn,P))];Si(D,X,n,t,e,i)?(S||(o.lineStart(),o.point(D[0],D[1])),o.point(X[0],X[1]),G||o.lineEnd(),y=!1):G&&(o.lineStart(),o.point(s,P),y=!1)}E=s,w=P,S=G}return I}}const Yn=n=>n;var Gn=new b,qn=new b,Tt,Ft,Zn,xn,U={point:q,lineStart:q,lineEnd:q,polygonStart:function(){U.lineStart=yi,U.lineEnd=wi},polygonEnd:function(){U.lineStart=U.lineEnd=U.point=q,Gn.add(F(qn)),qn=new b},result:function(){var n=Gn/2;return Gn=new b,n}};function yi(){U.point=_i}function _i(n,t){U.point=Gt,Tt=Zn=n,Ft=xn=t}function Gt(n,t){qn.add(xn*n-Zn*t),Zn=n,xn=t}function wi(){Gt(Tt,Ft)}const ht=U;var an=1/0,Pn=an,vn=-an,Rn=vn,mi={point:$i,lineStart:q,lineEnd:q,polygonStart:q,polygonEnd:q,result:function(){var n=[[an,Pn],[vn,Rn]];return vn=Rn=-(Pn=an=1/0),n}};function $i(n,t){n<an&&(an=n),n>vn&&(vn=n),t<Pn&&(Pn=t),t>Rn&&(Rn=t)}const Nn=mi;var Vn=0,kn=0,cn=0,Ln=0,An=0,on=0,Jn=0,Kn=0,sn=0,Dt,Ht,V,k,x={point:nn,lineStart:gt,lineEnd:dt,polygonStart:function(){x.lineStart=Ri,x.lineEnd=Ni},polygonEnd:function(){x.point=nn,x.lineStart=gt,x.lineEnd=dt},result:function(){var n=sn?[Jn/sn,Kn/sn]:on?[Ln/on,An/on]:cn?[Vn/cn,kn/cn]:[NaN,NaN];return Vn=kn=cn=Ln=An=on=Jn=Kn=sn=0,n}};function nn(n,t){Vn+=n,kn+=t,++cn}function gt(){x.point=Mi}function Mi(n,t){x.point=Pi,nn(V=n,k=t)}function Pi(n,t){var e=n-V,i=t-k,r=tn(e*e+i*i);Ln+=r*(V+n)/2,An+=r*(k+t)/2,on+=r,nn(V=n,k=t)}function dt(){x.point=nn}function Ri(){x.point=Li}function Ni(){Bt(Dt,Ht)}function Li(n,t){x.point=Bt,nn(Dt=V=n,Ht=k=t)}function Bt(n,t){var e=n-V,i=t-k,r=tn(e*e+i*i);Ln+=r*(V+n)/2,An+=r*(k+t)/2,on+=r,r=k*n-V*t,Jn+=r*(V+n),Kn+=r*(k+t),sn+=r*3,nn(V=n,k=t)}const vt=x;function Ot(n){this._context=n}Ot.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,Z);break}}},result:q};var Qn=new b,Dn,Wt,Xt,pn,hn,In={point:q,lineStart:function(){In.point=Ai},lineEnd:function(){Dn&&Yt(Wt,Xt),In.point=q},polygonStart:function(){Dn=!0},polygonEnd:function(){Dn=null},result:function(){var n=+Qn;return Qn=new b,n}};function Ai(n,t){In.point=Yt,Wt=pn=n,Xt=hn=t}function Yt(n,t){pn-=n,hn-=t,Qn.add(tn(pn*pn+hn*hn)),pn=n,hn=t}const St=In;let Et,Cn,yt,_t;class wt{constructor(t){this._append=t==null?qt:Ii(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:{this._append`M${t},${e}`,this._point=1;break}case 1:{this._append`L${t},${e}`;break}default:{if(this._append`M${t},${e}`,this._radius!==yt||this._append!==Cn){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,yt=i,Cn=this._append,_t=this._,this._=r}this._+=_t;break}}}result(){const t=this._;return this._="",t.length?t:null}}function qt(n){let t=1;this._+=n[0];for(const e=n.length;t<e;++t)this._+=arguments[t]+n[t]}function Ii(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return qt;if(t!==Et){const e=10**t;Et=t,Cn=function(r){let u=1;this._+=r[0];for(const f=r.length;u<f;++u)this._+=Math.round(arguments[u]*e)/e+r[u]}}return Cn}function Ci(n,t){let e=3,i=4.5,r,u;function f(c){return c&&(typeof i=="function"&&u.pointRadius(+i.apply(this,arguments)),rn(c,r(u))),u.result()}return f.area=function(c){return rn(c,r(ht)),ht.result()},f.measure=function(c){return rn(c,r(St)),St.result()},f.bounds=function(c){return rn(c,r(Nn)),Nn.result()},f.centroid=function(c){return rn(c,r(vt)),vt.result()},f.projection=function(c){return arguments.length?(r=c==null?(n=null,Yn):(n=c).stream,f):n},f.context=function(c){return arguments.length?(u=c==null?(t=null,new wt(e)):new Ot(t=c),typeof i!="function"&&u.pointRadius(i),f):t},f.pointRadius=function(c){return arguments.length?(i=typeof c=="function"?c:(u.pointRadius(+c),+c),f):i},f.digits=function(c){if(!arguments.length)return e;if(c==null)e=null;else{const d=Math.floor(c);if(!(d>=0))throw new RangeError(`invalid digits: ${c}`);e=d}return t===null&&(u=new wt(e)),f},f.projection(n).digits(e).context(t)}function jn(n){return function(t){var e=new Un;for(var i in n)e[i]=n[i];return e.stream=t,e}}function Un(){}Un.prototype={constructor:Un,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function bn(n,t,e){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),rn(e,n.stream(Nn)),t(Nn.result()),i!=null&&n.clipExtent(i),n}function Zt(n,t,e){return bn(n,function(i){var r=t[1][0]-t[0][0],u=t[1][1]-t[0][1],f=Math.min(r/(i[1][0]-i[0][0]),u/(i[1][1]-i[0][1])),c=+t[0][0]+(r-f*(i[1][0]+i[0][0]))/2,d=+t[0][1]+(u-f*(i[1][1]+i[0][1]))/2;n.scale(150*f).translate([c,d])},e)}function zi(n,t,e){return Zt(n,[[0,0],t],e)}function Ti(n,t,e){return bn(n,function(i){var r=+t,u=r/(i[1][0]-i[0][0]),f=(r-u*(i[1][0]+i[0][0]))/2,c=-u*i[0][1];n.scale(150*u).translate([f,c])},e)}function Fi(n,t,e){return bn(n,function(i){var r=+t,u=r/(i[1][1]-i[0][1]),f=-u*i[0][0],c=(r-u*(i[1][1]+i[0][1]))/2;n.scale(150*u).translate([f,c])},e)}var mt=16,Gi=H(30*W);function $t(n,t){return+t?Hi(n,t):Di(n)}function Di(n){return jn({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function Hi(n,t){function e(i,r,u,f,c,d,g,o,a,l,p,h,_,v){var R=g-i,E=o-r,w=R*R+E*E;if(w>4*t&&_--){var S=f+l,$=c+p,y=d+h,I=tn(S*S+$*$+y*y),N=dn(y/=I),L=F(F(y)-1)<z||F(u-a)<z?(u+a)/2:gn($,S),C=n(L,N),m=C[0],O=C[1],T=m-i,M=O-r,s=E*T-R*M;(s*s/w>t||F((R*T+E*M)/w-.5)>.3||f*l+c*p+d*h<Gi)&&(e(i,r,u,f,c,d,m,O,L,S/=I,$/=I,y,_,v),v.point(m,O),e(m,O,L,S,$,y,g,o,a,l,p,h,_,v))}}return function(i){var r,u,f,c,d,g,o,a,l,p,h,_,v={point:R,lineStart:E,lineEnd:S,polygonStart:function(){i.polygonStart(),v.lineStart=$},polygonEnd:function(){i.polygonEnd(),v.lineStart=E}};function R(N,L){N=n(N,L),i.point(N[0],N[1])}function E(){a=NaN,v.point=w,i.lineStart()}function w(N,L){var C=un([N,L]),m=n(N,L);e(a,l,o,p,h,_,a=m[0],l=m[1],o=N,p=C[0],h=C[1],_=C[2],mt,i),i.point(a,l)}function S(){v.point=R,i.lineEnd()}function $(){E(),v.point=y,v.lineEnd=I}function y(N,L){w(r=N,L),u=a,f=l,c=p,d=h,g=_,v.point=w}function I(){e(a,l,o,p,h,_,u,f,r,c,d,g,mt,i),v.lineEnd=S,S()}return v}}var Bi=jn({point:function(n,t){this.stream.point(n*W,t*W)}});function Oi(n){return jn({point:function(t,e){var i=n(t,e);return this.stream.point(i[0],i[1])}})}function Wi(n,t,e,i,r){function u(f,c){return f*=i,c*=r,[t+n*f,e-n*c]}return u.invert=function(f,c){return[(f-t)/n*i,(e-c)/n*r]},u}function Mt(n,t,e,i,r,u){if(!u)return Wi(n,t,e,i,r);var f=H(u),c=B(u),d=f*n,g=c*n,o=f/n,a=c/n,l=(c*e-f*t)/n,p=(c*t+f*e)/n;function h(_,v){return _*=i,v*=r,[d*_-g*v+t,e-g*_-d*v]}return h.invert=function(_,v){return[i*(o*_-a*v+l),r*(p-a*_-o*v)]},h}function Xi(n){return Yi(function(){return n})()}function Yi(n){var t,e=150,i=480,r=250,u=0,f=0,c=0,d=0,g=0,o,a=0,l=1,p=1,h=null,_=pt,v=null,R,E,w,S=Yn,$=.5,y,I,N,L,C;function m(s){return N(s[0]*W,s[1]*W)}function O(s){return s=N.invert(s[0],s[1]),s&&[s[0]*Q,s[1]*Q]}m.stream=function(s){return L&&C===s?L:L=Bi(Oi(o)(_(y(S(C=s)))))},m.preclip=function(s){return arguments.length?(_=s,h=void 0,M()):_},m.postclip=function(s){return arguments.length?(S=s,v=R=E=w=null,M()):S},m.clipAngle=function(s){return arguments.length?(_=+s?vi(h=s*W):(h=null,pt),M()):h*Q},m.clipExtent=function(s){return arguments.length?(S=s==null?(v=R=E=w=null,Yn):Ei(v=+s[0][0],R=+s[0][1],E=+s[1][0],w=+s[1][1]),M()):v==null?null:[[v,R],[E,w]]},m.scale=function(s){return arguments.length?(e=+s,T()):e},m.translate=function(s){return arguments.length?(i=+s[0],r=+s[1],T()):[i,r]},m.center=function(s){return arguments.length?(u=s[0]%360*W,f=s[1]%360*W,T()):[u*Q,f*Q]},m.rotate=function(s){return arguments.length?(c=s[0]%360*W,d=s[1]%360*W,g=s.length>2?s[2]%360*W:0,T()):[c*Q,d*Q,g*Q]},m.angle=function(s){return arguments.length?(a=s%360*W,T()):a*Q},m.reflectX=function(s){return arguments.length?(l=s?-1:1,T()):l<0},m.reflectY=function(s){return arguments.length?(p=s?-1:1,T()):p<0},m.precision=function(s){return arguments.length?(y=$t(I,$=s*s),M()):tn($)},m.fitExtent=function(s,P){return Zt(m,s,P)},m.fitSize=function(s,P){return zi(m,s,P)},m.fitWidth=function(s,P){return Ti(m,s,P)},m.fitHeight=function(s,P){return Fi(m,s,P)};function T(){var s=Mt(e,0,0,l,p,a).apply(null,t(u,f)),P=Mt(e,i-s[0],r-s[1],l,p,a);return o=li(c,d,g),I=Wn(t,P),N=Wn(o,I),y=$t(I,$),M()}function M(){return L=C=null,m}return function(){return t=n.apply(this,arguments),m.invert=t.invert&&O,T()}}function xt(n,t){var e=t*t,i=e*e;return[n*(.8707-.131979*e+i*(-.013791+i*(.003971*e-.001529*i))),t*(1.007226+e*(.015085+i*(-.044475+.028874*e-.005916*i)))]}xt.invert=function(n,t){var e=t,i=25,r;do{var u=e*e,f=u*u;e-=r=(e*(1.007226+u*(.015085+f*(-.044475+.028874*u-.005916*f)))-t)/(1.007226+u*(.015085*3+f*(-.044475*7+.028874*9*u-.005916*11*f)))}while(F(r)>z&&--i>0);return[n/(.8707+(u=e*e)*(-.131979+u*(-.013791+u*u*u*(.003971-.001529*u)))),e]};function qi(){return Xi(xt).scale(175.295)}function Zi(n){return n}function xi(n){if(n==null)return Zi;var t,e,i=n.scale[0],r=n.scale[1],u=n.translate[0],f=n.translate[1];return function(c,d){d||(t=e=0);var g=2,o=c.length,a=new Array(o);for(a[0]=(t+=c[0])*i+u,a[1]=(e+=c[1])*r+f;g<o;)a[g]=c[g],++g;return a}}function Vi(n,t){for(var e,i=n.length,r=i-t;r<--i;)e=n[r],n[r++]=n[i],n[i]=e}function ki(n,t){return typeof t=="string"&&(t=n.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(e){return Pt(n,e)})}:Pt(n,t)}function Pt(n,t){var e=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,u=Ji(n,t);return e==null&&i==null?{type:"Feature",properties:r,geometry:u}:i==null?{type:"Feature",id:e,properties:r,geometry:u}:{type:"Feature",id:e,bbox:i,properties:r,geometry:u}}function Ji(n,t){var e=xi(n.transform),i=n.arcs;function r(o,a){a.length&&a.pop();for(var l=i[o<0?~o:o],p=0,h=l.length;p<h;++p)a.push(e(l[p],p));o<0&&Vi(a,h)}function u(o){return e(o)}function f(o){for(var a=[],l=0,p=o.length;l<p;++l)r(o[l],a);return a.length<2&&a.push(a[0]),a}function c(o){for(var a=f(o);a.length<4;)a.push(a[0]);return a}function d(o){return o.map(c)}function g(o){var a=o.type,l;switch(a){case"GeometryCollection":return{type:a,geometries:o.geometries.map(g)};case"Point":l=u(o.coordinates);break;case"MultiPoint":l=o.coordinates.map(u);break;case"LineString":l=f(o.arcs);break;case"MultiLineString":l=o.arcs.map(f);break;case"Polygon":l=d(o.arcs);break;case"MultiPolygon":l=o.arcs.map(d);break;default:return null}return{type:a,coordinates:l}}return g(t)}const Rt="countries-container",Nt="legend-gradient",Lt=750,Ki=1e-4,ne=Vt({__name:"Countries",setup(n){kt(g=>({"1efb4b52":nt(zn),"07e422b2":nt(tt)}));const t=qi(),e=Ci().projection(t);let i,r,u,f;async function c(){if(i||(i=(await jt.get("/api/countries")).data,u=ti(Object.values(i)),f=ni([0,u],[0,100],Ki)),!r){const g=await bt(()=>import("./countries-50m-ceb56453.js"),[]);r=ki(g,g.objects.countries)}}const d=async g=>{await c();const o=window.innerWidth,a=o/1.65,l={top:0,right:.06*o,left:.04*o,bottom:0},p=o-l.left-l.right,h=a-l.top-l.bottom,_=ii(`#${Rt}`);_.select("svg").remove();const v=_.append("svg").attr("width",o).attr("height",a),R=v.append("defs").append("linearGradient").attr("id",Nt);R.append("stop").attr("stop-color",Qt),R.append("stop").attr("offset","1").attr("stop-color",tt);const E=v.append("g").attr("transform",`translate(${l.left},${l.top}) scale(${p/947.35},${h/490.94})`),w=function*(M){let s=1;for(;s<u;)yield{data:s,additional:!1},s*=10;for(const P of M)yield{data:P,additional:!0}},S=(M,s)=>{const P=L.selectAll("g").data(M),G=P.enter().append("g");s?it(G.attr("transform",`translate(${T(0)},0)`),Lt).attr("transform",D=>`translate(${T(D.data)},0)`):G.attr("transform",D=>`translate(${T(D.data)},0)`),G.append("line").attr("y1",y*.2).attr("y2",y*.5).attr("stroke",zn).attr("stroke-width","0.2"),G.append("text").attr("y",D=>D.additional?y*.65:y*.81).text(D=>D.data).attr("text-anchor","middle").attr("font-size",O*.04).attr("fill",zn),P.exit().remove()},$=E.selectAll("path").data(r.features).enter().append("path").attr("d",e).attr("class","country-path").on("mouseover",(M,s)=>{S(w([i[s.properties.name]||0]),!1)}).on("mouseout",()=>{S(w([]),!1)});g?it($.attr("fill-opacity",0),Lt).attr("fill-opacity",M=>`${f(i[M.properties.name]||0)}%`):$.attr("fill-opacity",M=>`${f(i[M.properties.name]||0)}%`),$.append("title").text(M=>`${M.properties.name} ${i[M.properties.name]||0}`);const y=a*.081,I=a*.66,N=o*.22,L=v.append("g").attr("transform",`translate(${l.left},${I})`);L.append("rect").attr("width",N).attr("height",y).attr("rx",4).attr("class","legend-box");const C=.06*N,m=.12*y,O=N-2*C;L.append("rect").attr("x",C).attr("y",.27*y).attr("width",O).attr("height",m).attr("fill",`url('#${Nt}')`);const T=M=>C+f(M)/100*O;S(w([]),g)};return Jt(()=>{d(!0),window.addEventListener("resize",()=>d(!1))}),(g,o)=>(Ut(),Kt("div",{id:Rt}))}});export{ne as default};
